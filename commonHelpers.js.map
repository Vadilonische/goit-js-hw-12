{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// export function getImages(query) {\n//   const params = new URLSearchParams({\n//     key: '43027041-c13525989a1527b0b019a35b5',\n//     q: query,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   });\n//   const url = `https://pixabay.com/api/?${params}`;\n\n//   return fetch(url);\n// }\n\nimport axios from 'axios';\n\nexport async function getImages(query, pageNumber) {\n  const params = new URLSearchParams({\n    key: '43027041-c13525989a1527b0b019a35b5',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pageNumber,\n    per_page: 3,\n  });\n\n  const url = `https://pixabay.com/api/?${params}`;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n","// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// export function imageTemplate(image) {\n//   return `<li class=\"image-items\">\n//         <a class=\"image-link\" href=\"${image.largeImageURL}\">\n//           <img\n//             src=\"${image.webformatURL}\"\n//             alt=\"${image.tags}\"\n//             class=\"photo-image\"\n//           />\n//         </a>\n//         <div class=\"image-info\">\n//           <p><span class=\"accent\">Likes:</span> ${image.likes}</p>\n//           <p><span class=\"accent\">Views:</span> ${image.views}</p>\n//           <p><span class=\"accent\">Comments:</span> ${image.comments}</p>\n//           <p><span class=\"accent\">Downloads:</span> ${image.downloads}</p>\n//         </div>\n//       </li>`;\n// }\n// export function renderImages(arr) {\n//   const searchResults = document.querySelector('#search-results');\n//   searchResults.innerHTML = arr.map(imageTemplate).join('');\n//   const lightbox = new SimpleLightbox('.image-link', {\n//     captionsData: 'alt',\n//     captionDelay: 250,\n//   });\n//   lightbox.refresh();\n// }\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from '../main';\n\nfunction imageTemplate(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n  return `<li class=\"image-items\">\n        <a class=\"image-link\" href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            class=\"photo-image\"\n          />\n        </a>\n        <div class=\"image-info\">\n          <p><span class=\"accent\">Likes:</span> ${likes}</p>\n          <p><span class=\"accent\">Views:</span> ${views}</p>\n          <p><span class=\"accent\">Comments:</span> ${comments}</p>\n          <p><span class=\"accent\">Downloads:</span> ${downloads}</p>\n        </div>\n      </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderImages(arr) {\n  const markup = imagesTemplate(arr);\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n","// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n// import { getImages } from './js/pixabay-api';\n// import { renderImages } from './js/render-functions';\n\n// function showLoader() {\n//   const loader = document.querySelector('.loader');\n//   loader.style.display = 'flex';\n// }\n\n// function hideLoader() {\n//   const loader = document.querySelector('.loader');\n//   loader.style.display = 'none';\n// }\n\n// export const refs = {\n//   searchForm: document.querySelector('.search-form'),\n//   inputSearch: document.querySelector('.input-search'),\n//   gallery: document.querySelector('.gallery'),\n// };\n\n// function showError(message) {\n//   iziToast.error({\n//     title: 'Error',\n//     message,\n//     position: 'topRight',\n//   });\n// }\n\n// function clearGallery() {\n//   refs.gallery.innerHTML = '';\n// }\n\n// hideLoader();\n\n// refs.searchForm.addEventListener('submit', handleSubmit);\n\n// function handleSubmit(event) {\n//   event.preventDefault();\n\n//   const nameId = event.target.elements.name.value.trim();\n//   if (nameId === '') {\n//     showError(\n//       'Sorry, there are no images matching your search query. Please try again!'\n//     );\n//     clearGallery();\n//   } else {\n//     clearGallery();\n//     showLoader();\n//     getImages(nameId)\n//       .then(res => {\n//         if (!res.ok) {\n//           showError('Request failed. try again later');\n//         }\n//         clearGallery();\n//         return res.json();\n//       })\n//       .then(data => {\n//         if (data.hits.length == 0) {\n//           showLoader();\n//           showError(\n//             'Sorry, there are no images matching your search query. Please try again!'\n//           );\n//           clearGallery();\n//         } else {\n//           renderImages(data.hits);\n//         }\n//       })\n//       .catch(error => {\n//         console.log(error);\n//       })\n//       .finally(() => {\n//         hideLoader();\n//       });\n//   }\n//   event.target.elements.name.value = '';\n// }\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\n//================================\n\nexport const refs = {\n  searchForm: document.querySelector('.search-form'),\n  inputSearch: document.querySelector('.input-search'),\n  gallery: document.querySelector('.gallery'),\n  btnLoadMore: document.querySelector('.btn-load-more'),\n};\n\n//================================\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\n//================================\n\nlet query;\nlet pageNumber = 1;\n\n//================================\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n  });\n}\n\n//================================\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.name.value.trim();\n\n  refs.gallery.innerHTML = '';\n\n  if (!query) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  const data = await getImages(query, pageNumber);\n\n  renderImages(data.hits);\n\n  showLoadMore();\n}\n\n//=================================\n\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\nasync function onLoadMoreClick() {\n  const data = await getImages(query, (pageNumber += 1));\n  renderImages(data.hits);\n  showLoadMore();\n}\n"],"names":["getImages","query","pageNumber","url","axios","imageTemplate","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderImages","markup","refs","showLoadMore","showError","message","iziToast","onFormSubmit","e","data","onLoadMoreClick"],"mappings":"6vBAeO,eAAeA,EAAUC,EAAOC,EAAY,CAWjD,MAAMC,EAAM,4BAVG,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,CACd,CAAG,CAE6C,GAG9C,OADY,MAAME,EAAM,IAAID,CAAG,GACpB,IACb,CCKA,SAASE,EAAcC,EAAO,CAC5B,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,sCAC6BC,CAAa;AAAA;AAAA,mBAEhCC,CAAY;AAAA,mBACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAK2BC,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA,YAG/D,CAEA,SAASC,EAAeC,EAAK,CAC3B,OAAOA,EAAI,IAAIV,CAAa,EAAE,KAAK,EAAE,CACvC,CAEO,SAASW,EAAaD,EAAK,CAChC,MAAME,EAASH,EAAeC,CAAG,EAEjCG,EAAK,QAAQ,mBAAmB,YAAaD,CAAM,CACrD,CCiBO,MAAMC,EAAO,CAClB,WAAY,SAAS,cAAc,cAAc,EACjD,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAIA,SAASC,GAAe,CACtBD,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CAQA,IAAIjB,EACAC,EAAa,EAIjB,SAASkB,EAAUC,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,EACA,SAAU,UACd,CAAG,CACH,CAIAH,EAAK,WAAW,iBAAiB,SAAUK,CAAY,EAEvD,eAAeA,EAAaC,EAAG,CAO7B,GANAA,EAAE,eAAc,EAEhBvB,EAAQuB,EAAE,OAAO,SAAS,KAAK,MAAM,OAErCN,EAAK,QAAQ,UAAY,GAErB,CAACjB,EAAO,CACVmB,EACE,0EACN,EACI,MACD,CAED,MAAMK,EAAO,MAAMzB,EAAUC,EAAOC,CAAU,EAE9Cc,EAAaS,EAAK,IAAI,EAEtBN,GACF,CAIAD,EAAK,YAAY,iBAAiB,QAASQ,CAAe,EAC1D,eAAeA,GAAkB,CAC/B,MAAMD,EAAO,MAAMzB,EAAUC,EAAQC,GAAc,CAAC,EACpDc,EAAaS,EAAK,IAAI,EACtBN,GACF"}