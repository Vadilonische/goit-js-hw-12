{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, pageNumber) {\n  const params = new URLSearchParams({\n    key: '43027041-c13525989a1527b0b019a35b5',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pageNumber,\n    per_page: 15,\n  });\n\n  const url = `https://pixabay.com/api/?${params}`;\n\n  const res = await axios.get(url);\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from '../main';\n\nfunction imageTemplate(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n  return `<li class=\"image-items\">\n        <a class=\"image-link\" href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            class=\"photo-image\"\n          />\n        </a>\n        <div class=\"image-info\">\n          <p><span class=\"accent\">Likes:</span> ${likes}</p>\n          <p><span class=\"accent\">Views:</span> ${views}</p>\n          <p><span class=\"accent\">Comments:</span> ${comments}</p>\n          <p><span class=\"accent\">Downloads:</span> ${downloads}</p>\n        </div>\n      </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderImages(arr) {\n  const markup = imagesTemplate(arr);\n\n  const lightbox = new SimpleLightbox('.image-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\n//================================\n\nexport const refs = {\n  searchForm: document.querySelector('.search-form'),\n  inputSearch: document.querySelector('.input-search'),\n  gallery: document.querySelector('.gallery'),\n  btnLoadMore: document.querySelector('.btn-load-more'),\n  loader: document.querySelector('.loader'),\n};\n\n//================================\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\n//================================\n\nlet query;\nlet pageNumber;\nlet maxPage = 0;\nconst perPage = 15;\n\n//================================\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n  });\n}\n\nfunction showErrorEndSearch(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'bottomRight',\n  });\n}\n//================================\n\nfunction checkBtnStatus() {\n  if (pageNumber >= maxPage) {\n    hideLoadMore();\n    showErrorEndSearch(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  } else {\n    showLoadMore();\n  }\n}\n\n//================================\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\n//================================\n\nfunction hideLoader(params) {\n  refs.loader.classList.add('hidden');\n}\n\n//================================\nfunction myScroll() {\n  const height = refs.gallery.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\n//================================\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.name.value.trim();\n  pageNumber = 1;\n  refs.gallery.innerHTML = '';\n\n  if (!query) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    hideLoadMore();\n    return;\n  }\n\n  showLoader();\n  try {\n    const data = await getImages(query, pageNumber);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderImages(data.hits);\n  } catch (error) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  }\n\n  hideLoader();\n  checkBtnStatus();\n  e.target.reset();\n}\n\n//=================================\n\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\nasync function onLoadMoreClick() {\n  showLoader();\n\n  try {\n    const data = await getImages(query, (pageNumber += 1));\n    renderImages(data.hits);\n  } catch (error) {\n    showError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  }\n\n  myScroll();\n  checkBtnStatus();\n  hideLoader();\n}\n"],"names":["getImages","query","pageNumber","url","axios","imageTemplate","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderImages","markup","SimpleLightbox","refs","showLoadMore","hideLoadMore","maxPage","perPage","showError","message","iziToast","showErrorEndSearch","checkBtnStatus","showLoader","hideLoader","params","myScroll","height","onFormSubmit","data","onLoadMoreClick"],"mappings":"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"}